(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),i=a.n(r),c=a(9),o=a.n(c),s=(a(16),a(3)),l=a(4),m=a(6),g=a(5),u=(a(17),function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={imageName:""},e.handleChange=function(t){e.setState({imageName:t.currentTarget.value})},e.handleSubmit=function(t){var a=e.state.imageName;t.preventDefault(),""!==a.trim()?(e.props.onSubmit(a.trim()),e.setState({imageName:""})):alert("Enter picture name")},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange,value:this.state.imageName})]})})}}]),a}(r.Component)),h=a(8);var d=function(e){var t=e.src,a=e.name,r=e.id;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:t,alt:a,className:"ImageGalleryItem-image",id:String(r)})},String(r))})};var b={fetchImage:function(e,t){return fetch("https://pixabay.com/api/?key=".concat("19420354-3227e9c850ee70e183cd8e591","&q=").concat(e,"&image_type=photo&per_page=12&page=").concat(t)).then((function(e){return e.json()}))}},p=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={images:[],loading:!1},e.componentDidUpdate=function(t,a){var n=e.props,r=n.imageName,i=n.pageNumber,c=n.resetPageNumber;if(t.imageName!==r)return e.setState({images:[]},(function(){e.getImages(e.state.images)})),void c();t.pageNumber!==i&&a===e.state&&e.getImages(e.state.images)},e.getImages=function(t){e.state.key;var a=e.props,n=a.changeLoading,r=a.imageName,i=a.pageNumber,c=a.changeImagesLength,o=a.errorHandling;n(!0),b.fetchImage(r,i).then((function(a){if(a.total>0)return e.setState({images:[].concat(Object(h.a)(t),Object(h.a)(a.hits))});o('No resault on your request "'.concat(r,'"'))})).catch((function(e){return o(e.message)})).finally((function(){n(!1),c(e.state.images),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.images;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("ul",{className:"ImageGallery",onClick:function(a){return e.props.onOpenImage(a,t)},children:t.map((function(e){return Object(n.jsx)(d,{src:e.webformatURL,name:e.type,id:e.id})}))})})}}]),a}(r.Component);var j=function(e){var t=e.callBack;return Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})},f=a(10),O=a.n(f),v=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.props.onCloseByKey)}},{key:"render",value:function(){var e=this.props,t=e.src,a=e.onCloseModelOverlay;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"Overlay",onClick:a,children:Object(n.jsx)("div",{className:"Modal",children:Object(n.jsx)("img",{src:t,alt:"Model"})})})})}}]),a}(r.Component),y=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={imageName:"",isModalOpen:!1,loading:!1,pageNumber:1,imagesLength:0,largeImageURL:"",idForModal:0,error:null},e.handleSerchSubmit=function(t){e.setState({imageName:t})},e.handleOpenImage=function(t,a){if(t.target.src){var n=t.target.id,r=a.find((function(e){return e.id===Number(n)}));e.setState({largeImageURL:r.largeImageURL}),e.setState({isModalOpen:!0})}},e.isLoadMoreVisible=function(){if(0===e.state.imagesLength&&!1===e.state.loading)return!1},e.handleLoadMore=function(){e.setState((function(e){return{pageNumber:e.pageNumber+1}}))},e.resetPageNumber=function(){e.setState({pageNumber:1})},e.changeLoading=function(t){e.setState({loading:t})},e.changeImagesLength=function(t){e.setState({imagesLength:t.length})},e.handleCloseByOverlay=function(t){t.target.classList.contains("Overlay")&&e.setState({isModalOpen:!1})},e.handleCloseByKey=function(t){"Escape"===t.code&&e.setState({isModalOpen:!1})},e.errorHandling=function(t){e.setState({error:t},(function(){alert(e.state.error)}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.imageName,r=e.pageNumber,i=e.isModalOpen,c=e.imagesLength;return Object(n.jsxs)("div",{onKeyDown:this.handleCloseByKey,children:[Object(n.jsx)(u,{onSubmit:this.handleSerchSubmit}),Object(n.jsx)(p,{imageName:a,onOpenImage:this.handleOpenImage,pageNumber:r,changeImagesLength:this.changeImagesLength,resetPageNumber:this.resetPageNumber,changeLoading:this.changeLoading,errorHandling:this.errorHandling}),t&&Object(n.jsx)("div",{className:"LoaderContainer",children:Object(n.jsx)("div",{className:"Loader",children:Object(n.jsx)(O.a,{type:"ThreeDots",color:"#00BFFF",height:100,width:100,timeout:1e4})})}),c>0&&Object(n.jsx)(j,{callBack:this.handleLoadMore}),i&&Object(n.jsx)(v,{src:this.state.largeImageURL,onCloseModelOverlay:this.handleCloseByOverlay,onCloseByKey:this.handleCloseByKey})]})}}]),a}(r.Component),N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))};o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),N()}},[[38,1,2]]]);
//# sourceMappingURL=main.6cfb32f3.chunk.js.map