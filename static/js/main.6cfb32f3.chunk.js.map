{"version":3,"sources":["components/Searchbar.js","components/ImageGalleryItem.js","service/ImageApi.js","components/ImageGallery.js","components/Button.js","components/Modal.js","App.js","reportWebVitals.js","index.js"],"names":["Searchbar","state","imageName","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","trim","props","onSubmit","alert","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","src","name","id","alt","String","api","fetchImage","pageNumber","fetch","then","r","json","ImageGallery","images","loading","componentDidUpdate","prevProps","prevState","resetPageNumber","getImages","prevImages","key","changeLoading","changeImagesLength","errorHandling","imageAPI","total","hits","catch","error","message","finally","window","scrollTo","top","document","documentElement","scrollHeight","behavior","onClick","onOpenImage","map","i","webformatURL","Button","callBack","Modal","addEventListener","onCloseByKey","onCloseModelOverlay","App","isModalOpen","imagesLength","largeImageURL","idForModal","handleSerchSubmit","handleOpenImage","target","targetId","image","find","Number","isLoadMoreVisible","handleLoadMore","currentState","bool","length","handleCloseByOverlay","classList","contains","handleCloseByKey","event","code","errorMessage","onKeyDown","color","height","width","timeout","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6cfb32f3.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nexport class Searchbar extends Component {\r\n  state = { imageName: \"\" };\r\n\r\n  // Отображение значений в инпуте\r\n  handleChange = (e) => {\r\n    this.setState({ imageName: e.currentTarget.value });\r\n  };\r\n\r\n  // Внесение изменений в стэйт imageName по сабмиту формы\r\n  handleSubmit = (e) => {\r\n    const { imageName } = this.state;\r\n    e.preventDefault();\r\n    if (imageName.trim() === \"\") {\r\n      alert(\"Enter picture name\");\r\n      return;\r\n    }\r\n    this.props.onSubmit(imageName.trim());\r\n    this.setState({ imageName: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleChange}\r\n            value={this.state.imageName}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction ImageGalleryItem({ src, name, id }) {\r\n  return (\r\n    <>\r\n      <li className=\"ImageGalleryItem\" key={String(id)}>\r\n        <img\r\n          src={src}\r\n          alt={name}\r\n          className=\"ImageGalleryItem-image\"\r\n          id={String(id)}\r\n        />\r\n      </li>\r\n    </>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  id: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","function fetchImage(imageName, pageNumber) {\r\n  const key = \"19420354-3227e9c850ee70e183cd8e591\";\r\n  return fetch(\r\n    `https://pixabay.com/api/?key=${key}&q=${imageName}&image_type=photo&per_page=12&page=${pageNumber}`\r\n  ).then((r) => r.json());\r\n}\r\nconst api = { fetchImage };\r\nexport default api;\r\n","import React, { Component } from \"react\";\r\nimport ImageGalleryItem from \"./ImageGalleryItem\";\r\nimport imageAPI from \"../service/ImageApi\";\r\n\r\nexport default class ImageGallery extends Component {\r\n  state = {\r\n    images: [],\r\n    loading: false,\r\n  };\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    const { imageName, pageNumber, resetPageNumber } = this.props;\r\n    // Если запрос изменился, то обнуляем массив картинок и номер страницы,\r\n    // и рендерим картинки\r\n    if (prevProps.imageName !== imageName) {\r\n      this.setState({ images: [] }, () => {\r\n        this.getImages(this.state.images);\r\n      });\r\n      resetPageNumber();\r\n      return;\r\n    }\r\n    // Если номер стр изменился и стэйт остался без изменений,\r\n    // рендерим картинки\r\n    if (prevProps.pageNumber !== pageNumber && prevState === this.state) {\r\n      this.getImages(this.state.images);\r\n    }\r\n  };\r\n\r\n  // Рендерим картинки в Галерею\r\n  getImages = (prevImages) => {\r\n    const { key } = this.state;\r\n    const {\r\n      changeLoading,\r\n      imageName,\r\n      pageNumber,\r\n      changeImagesLength,\r\n      errorHandling,\r\n    } = this.props;\r\n    changeLoading(true);\r\n    imageAPI\r\n      .fetchImage(imageName, pageNumber)\r\n      .then((r) => {\r\n        if (r.total > 0) {\r\n          return this.setState({ images: [...prevImages, ...r.hits] });\r\n        }\r\n\r\n        errorHandling(`No resault on your request \"${imageName}\"`);\r\n        return;\r\n      })\r\n      .catch((error) => errorHandling(error.message))\r\n      .finally(() => {\r\n        changeLoading(false);\r\n        changeImagesLength(this.state.images);\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: \"smooth\",\r\n        });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { images } = this.state;\r\n    return (\r\n      <>\r\n        <ul\r\n          className=\"ImageGallery\"\r\n          onClick={(e) => this.props.onOpenImage(e, images)}\r\n        >\r\n          {images.map((i) => (\r\n            <ImageGalleryItem src={i.webformatURL} name={i.type} id={i.id} />\r\n          ))}\r\n        </ul>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction Button({ callBack }) {\r\n  return (\r\n    <div>\r\n      <button type=\"button\" className=\"Button\" onClick={callBack}>\r\n        Load more\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  callBack: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this.props.onCloseByKey);\r\n  }\r\n  render() {\r\n    const { src, onCloseModelOverlay } = this.props;\r\n    return (\r\n      <>\r\n        <div className=\"Overlay\" onClick={onCloseModelOverlay}>\r\n          <div className=\"Modal\">\r\n            <img src={src} alt=\"Model\" />\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import \"./App.css\";\nimport React, { Component } from \"react\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport Button from \"./components/Button\";\nimport Loader from \"react-loader-spinner\";\nimport Modal from \"./components/Modal\";\n\nexport default class App extends Component {\n  state = {\n    imageName: \"\",\n    isModalOpen: false,\n    loading: false,\n    pageNumber: 1,\n    imagesLength: 0,\n    largeImageURL: \"\",\n    idForModal: 0,\n    error: null,\n  };\n  handleSerchSubmit = (imageName) => {\n    this.setState({ imageName });\n  };\n\n  // Открытие модалки с большой картинкой\n  handleOpenImage = (e, images) => {\n    if (!e.target.src) {\n      return;\n    }\n    const targetId = e.target.id;\n    const image = images.find((i) => i.id === Number(targetId));\n    this.setState({ largeImageURL: image.largeImageURL });\n    this.setState({ isModalOpen: true });\n  };\n\n  // Добавление кнопки Load more\n  isLoadMoreVisible = () => {\n    if (this.state.imagesLength === 0 && this.state.loading === false) {\n      return false;\n    }\n  };\n  // Добавление следующих картинок\n  handleLoadMore = () => {\n    this.setState((currentState) => {\n      return { pageNumber: currentState.pageNumber + 1 };\n    });\n  };\n\n  // Изменение номера страницы\n  resetPageNumber = () => {\n    this.setState({ pageNumber: 1 });\n  };\n\n  // Изменение состояние loading\n  changeLoading = (bool) => {\n    this.setState({ loading: bool });\n  };\n\n  // Изменений длины массива с картинками\n  changeImagesLength = (images) => {\n    this.setState({ imagesLength: images.length });\n  };\n  // Закрытие модалки по клику на оверлей\n  handleCloseByOverlay = (e) => {\n    if (!e.target.classList.contains(\"Overlay\")) {\n      return;\n    }\n    this.setState({ isModalOpen: false });\n  };\n\n  // Закрытие модалки по Esc\n  handleCloseByKey = (event) => {\n    if (event.code !== \"Escape\") {\n      return;\n    }\n    this.setState({ isModalOpen: false });\n  };\n\n  // Обработка ошибки запроса\n  errorHandling = (errorMessage) => {\n    this.setState({ error: errorMessage }, () => {\n      alert(this.state.error);\n    });\n  };\n\n  render() {\n    const {\n      loading,\n      imageName,\n      pageNumber,\n      isModalOpen,\n      imagesLength,\n    } = this.state;\n    return (\n      <div onKeyDown={this.handleCloseByKey}>\n        <Searchbar onSubmit={this.handleSerchSubmit} />\n        <ImageGallery\n          imageName={imageName}\n          onOpenImage={this.handleOpenImage}\n          pageNumber={pageNumber}\n          changeImagesLength={this.changeImagesLength}\n          resetPageNumber={this.resetPageNumber}\n          changeLoading={this.changeLoading}\n          errorHandling={this.errorHandling}\n        />\n        {loading && (\n          <div className=\"LoaderContainer\">\n            <div className=\"Loader\">\n              <Loader\n                type=\"ThreeDots\"\n                color=\"#00BFFF\"\n                height={100}\n                width={100}\n                timeout={10000}\n              />\n            </div>\n          </div>\n        )}\n        {imagesLength > 0 && <Button callBack={this.handleLoadMore} />}\n        {isModalOpen && (\n          <Modal\n            src={this.state.largeImageURL}\n            onCloseModelOverlay={this.handleCloseByOverlay}\n            onCloseByKey={this.handleCloseByKey}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}